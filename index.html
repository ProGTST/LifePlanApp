<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/icon/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ライフプランAPP</title>
  </head>
  <body>
    <!-- ========== アプリ画面（ログイン後は login.html から遷移） ========== -->
    <div id="app" class="screen app-layout" data-screen="app">

      <!-- メニューバー -->
      <nav class="app-menubar" aria-label="メインメニュー">
        <span id="menubar-title" class="app-menubar-title">ホーム</span>
        <div class="app-menubar-actions">
          <button type="button" class="app-menubar-icon" id="menubar-refresh-btn" aria-label="データ最新化" title="データ最新化（CSVから再取得）">
            <span class="app-menubar-icon-inner" style="--icon: url(/icon/rotate-solid-full.svg);" aria-hidden="true"></span>
          </button>
          <button type="button" class="app-menubar-icon" id="menubar-toggle-menu" aria-label="メニュー" title="メニュー">
            <span class="app-menubar-icon-inner" style="--icon: url(/icon/bars-solid-full.svg);" aria-hidden="true"></span>
          </button>
        </div>
      </nav>

      <div class="app-body-with-sidebar">
        <div class="app-body">

          <!-- ヘッダー -->
          <header class="app-header">
            <div id="menubar-profile-area" class="app-header-left is-visible" aria-hidden="false">
              <div id="header-profile-icon" class="app-header-profile-icon" aria-hidden="true"></div>
              <span id="header-profile-name" class="app-header-profile-name">ユーザー</span>
            </div>
            <span class="app-header-spacer"></span>
            <div class="app-header-actions">
              <button type="button" class="btn-primary btn-header-add" id="header-add-btn">追加</button>
              <button type="button" class="btn-secondary btn-header-delete" id="header-delete-btn">削除モード</button>
              <button type="button" class="btn-primary btn-header-save" id="header-save-btn">保存</button>
              <button type="button" class="btn-secondary btn-header-default" id="header-default-btn">デフォルトに戻す</button>
              <button type="button" class="btn-secondary" id="transaction-history-show-conditions-btn" aria-label="条件表示">条件表示</button>
              <button type="button" class="btn-secondary btn-header-refresh" id="transaction-history-reset-conditions-btn" aria-label="条件初期化">条件初期化</button>
              <span id="transaction-entry-view-only-notice" class="transaction-entry-view-only-notice" aria-hidden="true">※参照のみのデータです</span>
              <button type="button" class="btn-primary transaction-entry-submit--register" id="header-transaction-entry-submit" aria-label="登録">登録</button>
              <button type="button" class="btn-secondary" id="header-transaction-entry-copy-as-new">参照登録</button>
              <button type="button" class="btn-secondary" id="header-transaction-entry-reset">初期化</button>
              <button type="button" class="btn-header-transaction-entry-continuous" id="header-transaction-entry-continuous">連続モード</button>
              <button type="button" class="btn-header-transaction-entry-delete" id="header-transaction-entry-delete">削除</button>
            </div>
          </header>

          <!-- メインコンテンツ（ビュー切替） -->
          <main class="app-main">
            <!-- ビュー: ホーム -->
            <div id="view-home" class="main-view" data-view="home">
              <h1>Welcome to Tauri</h1>
              <p>Click on the Tauri logo to learn more about the framework.</p>
              <form id="greet-form">
                <input id="greet-input" type="text" placeholder="Enter a name..." />
                <button type="submit">Greet</button>
              </form>
              <p id="greet-msg"></p>
            </div>

            <!-- ビュー: カレンダー -->
            <div id="view-calendar" class="main-view main-view--hidden" data-view="calendar">
              <div class="view-body">
                <p class="calendar-view-message">収支履歴の「週カレンダー」「月カレンダー」タブでカレンダーをご利用いただけます。</p>
                <button type="button" class="btn-primary" id="calendar-view-to-history-btn">収支履歴を開く</button>
              </div>
            </div>

            <!-- 収支履歴・カレンダー・スケジュール共通: 検索条件 -->
            <div id="transaction-history-common" class="transaction-history-common main-view--hidden" aria-label="収支検索">
              <div class="search-conditions-panel-drag-handle" id="search-conditions-panel-drag-handle" aria-label="ドラッグで移動"></div>
              <div class="view-body">
                <section class="transaction-history-search" aria-label="検索条件">
                  <details class="transaction-history-search-accordion">
                    <summary class="transaction-history-search-summary">
                      <span class="transaction-history-search-summary-text">検索条件</span>
                      <button type="button" class="transaction-history-search-summary-close-btn" aria-label="閉じる">
                        <img src="/icon/xmark-solid-full.svg" alt="" width="20" height="20" />
                      </button>
                    </summary>
                    <div class="transaction-history-search-body">
                      <div class="transaction-history-search-row-group">
                        <div id="transaction-history-date-row" class="transaction-history-search-row">
                          <span class="transaction-history-search-label">日付</span>
                          <input type="date" id="transaction-history-date-from" class="transaction-history-date-input" aria-label="日付FROM" />
                          <span class="transaction-history-search-sep">～</span>
                          <input type="date" id="transaction-history-date-to" class="transaction-history-date-input" aria-label="日付TO" />
                        </div>
                        <div id="transaction-history-search-plan-row" class="transaction-history-search-row">
                          <span class="transaction-history-search-label">計画</span>
                          <div class="transaction-history-search-buttons" role="group" aria-label="計画">
                            <button type="button" class="btn-secondary transaction-history-filter-btn is-active" data-status="plan" id="transaction-history-status-plan">予定</button>
                            <button type="button" class="btn-secondary transaction-history-filter-btn is-active" data-status="actual" id="transaction-history-status-actual">実績</button>
                          </div>
                        </div>
                        <div class="transaction-history-search-row">
                          <span class="transaction-history-search-label">収支種別</span>
                          <div class="transaction-history-search-buttons" role="group" aria-label="収支種別">
                            <button type="button" class="btn-secondary transaction-history-filter-btn is-active" data-type="expense" id="transaction-history-type-expense">支出</button>
                            <button type="button" class="btn-secondary transaction-history-filter-btn is-active" data-type="income" id="transaction-history-type-income">収入</button>
                            <button type="button" class="btn-secondary transaction-history-filter-btn is-active" data-type="transfer" id="transaction-history-type-transfer">振替</button>
                          </div>
                        </div>
                        <div id="transaction-history-plan-status-row" class="transaction-history-search-row transaction-history-plan-status-row is-hidden" aria-hidden="true">
                          <span class="transaction-history-search-label">ステータス</span>
                          <div class="transaction-history-search-buttons" role="group" aria-label="ステータス">
                            <button type="button" class="btn-secondary transaction-history-filter-btn is-active" data-plan-status="planning" id="transaction-history-plan-status-planning">計画中</button>
                            <button type="button" class="btn-secondary transaction-history-filter-btn" data-plan-status="complete" id="transaction-history-plan-status-complete">完了</button>
                            <button type="button" class="btn-secondary transaction-history-filter-btn" data-plan-status="canceled" id="transaction-history-plan-status-canceled">中止</button>
                          </div>
                        </div>
                      </div>
                      <div class="transaction-history-search-row">
                        <span class="transaction-history-search-label">勘定項目</span>
                        <span id="transaction-history-account-display" class="transaction-history-chosen-display" aria-live="polite"></span>
                        <button type="button" class="btn-secondary" id="transaction-history-account-btn">選択</button>
                      </div>
                      <div class="transaction-history-search-row">
                        <span class="transaction-history-search-label">カテゴリー</span>
                        <span id="transaction-history-category-display" class="transaction-history-chosen-display" aria-live="polite"></span>
                        <button type="button" class="btn-secondary" id="transaction-history-category-btn">選択</button>
                      </div>
                      <div class="transaction-history-search-row">
                        <span class="transaction-history-search-label">タグ</span>
                        <span id="transaction-history-tag-display" class="transaction-history-chosen-display" aria-live="polite"></span>
                        <button type="button" class="btn-secondary" id="transaction-history-tag-btn">選択</button>
                      </div>
                      <div class="transaction-history-search-row-group">
                        <div class="transaction-history-search-row">
                          <span class="transaction-history-search-label">金額</span>
                          <input type="text" id="transaction-history-amount-min" class="transaction-history-amount-input" inputmode="numeric" placeholder="最小" aria-label="金額最小" />
                          <span class="transaction-history-search-sep">～</span>
                          <input type="text" id="transaction-history-amount-max" class="transaction-history-amount-input" inputmode="numeric" placeholder="最大" aria-label="金額最大" />
                        </div>
                        <div class="transaction-history-search-row">
                          <span class="transaction-history-search-label">任意</span>
                          <input type="text" id="transaction-history-free-text" class="transaction-history-free-text-input" placeholder="項目名・内容の部分一致" aria-label="任意検索" />
                        </div>
                      </div>
                    </div>
                  </details>
                </section>
              </div>
            </div>

            <!-- ビュー: スケジュール（ガント風） -->
            <div id="view-schedule" class="main-view main-view--hidden" data-view="schedule">
              <div class="view-body schedule-view-body">
                <div class="schedule-view-toolbar">
                  <div class="schedule-view-toolbar-left">
                    <label for="schedule-start-date" class="schedule-view-label">開始日</label>
                    <input type="date" id="schedule-start-date" class="schedule-view-date-input" aria-label="開始日" />
                    <div class="schedule-view-unit" role="group" aria-label="表示単位">
                      <button type="button" class="schedule-view-unit-btn is-active" data-schedule-unit="day" aria-pressed="true">日単位</button>
                      <button type="button" class="schedule-view-unit-btn" data-schedule-unit="week" aria-pressed="false">週単位</button>
                      <button type="button" class="schedule-view-unit-btn" data-schedule-unit="month" aria-pressed="false">月単位</button>
                    </div>
                  </div>
                  <div class="schedule-view-toolbar-day-range is-hidden" id="schedule-day-range-wrap">
                    <label for="schedule-past-months" class="schedule-view-label">過去</label>
                    <select id="schedule-past-months" class="schedule-view-month-select" aria-label="過去の月数">
                      <option value="1">1ヶ月</option>
                      <option value="2">2ヶ月</option>
                      <option value="3" selected>3ヶ月</option>
                      <option value="4">4ヶ月</option>
                      <option value="5">5ヶ月</option>
                      <option value="6">6ヶ月</option>
                      <option value="7">7ヶ月</option>
                      <option value="8">8ヶ月</option>
                      <option value="9">9ヶ月</option>
                      <option value="10">10ヶ月</option>
                      <option value="11">11ヶ月</option>
                      <option value="12">12ヶ月</option>
                    </select>
                    <label for="schedule-future-months" class="schedule-view-label">未来</label>
                    <select id="schedule-future-months" class="schedule-view-month-select" aria-label="未来の月数">
                      <option value="1">1ヶ月</option>
                      <option value="2">2ヶ月</option>
                      <option value="3">3ヶ月</option>
                      <option value="4">4ヶ月</option>
                      <option value="5">5ヶ月</option>
                      <option value="6" selected>6ヶ月</option>
                      <option value="7">7ヶ月</option>
                      <option value="8">8ヶ月</option>
                      <option value="9">9ヶ月</option>
                      <option value="10">10ヶ月</option>
                      <option value="11">11ヶ月</option>
                      <option value="12">12ヶ月</option>
                    </select>
                    <button type="button" class="btn-secondary schedule-view-scroll-reset-btn" id="schedule-scroll-reset-btn" aria-label="位置を戻す">位置を戻す</button>
                  </div>
                </div>
                <div class="schedule-view-grid-wrap">
                  <div class="schedule-view-table-inner">
                    <table class="schedule-view-table" id="schedule-table" aria-label="スケジュール">
                      <thead>
                        <tr id="schedule-yearmonth-row"></tr>
                        <tr id="schedule-head-row"></tr>
                      </thead>
                      <tbody id="schedule-tbody"></tbody>
                    </table>
                  </div>
                </div>
                <div id="schedule-summary-wrap" aria-label="表示データの集計">
                  <div class="schedule-view-summary schedule-view-summary--left">
                    <h2 class="schedule-view-summary__title">今月の評価</h2>
                    <div class="schedule-view-summary__body">
                    <dl class="schedule-view-summary-list schedule-view-summary-row">
                      <div class="schedule-view-summary-item"><dt>予定収入</dt><dd id="schedule-summary-month-plan-income">0</dd></div>
                      <div class="schedule-view-summary-item"><dt>予定支出</dt><dd id="schedule-summary-month-plan-expense">0</dd></div>
                      <div class="schedule-view-summary-item"><dt>予定残高</dt><dd id="schedule-summary-month-plan-balance">0</dd></div>
                    </dl>
                    <dl class="schedule-view-summary-list schedule-view-summary-row">
                      <div class="schedule-view-summary-item"><dt>実績収入</dt><dd id="schedule-summary-month-actual-income">0</dd></div>
                      <div class="schedule-view-summary-item"><dt>実績支出</dt><dd id="schedule-summary-month-actual-expense">0</dd></div>
                      <div class="schedule-view-summary-item"><dt>実績残高</dt><dd id="schedule-summary-month-actual-balance">0</dd></div>
                    </dl>
                    <dl class="schedule-view-summary-list schedule-view-summary-row">
                      <div class="schedule-view-summary-item"><dt>進捗率(収入)</dt><dd id="schedule-summary-month-progress-rate-income">—</dd></div>
                      <div class="schedule-view-summary-item"><dt>進捗率(支出)</dt><dd id="schedule-summary-month-progress-rate-expense">—</dd></div>
                      <div class="schedule-view-summary-item"><dt>進捗率(残高)</dt><dd id="schedule-summary-month-progress-rate-balance">—</dd></div>
                    </dl>
                    </div>
                  </div>
                  <div class="schedule-view-summary schedule-view-summary--right">
                    <h2 class="schedule-view-summary__title">全体の評価</h2>
                    <div class="schedule-view-summary__body">
                    <dl class="schedule-view-summary-list schedule-view-summary-row">
                      <div class="schedule-view-summary-item"><dt>予定収入</dt><dd id="schedule-summary-plan-income">0</dd></div>
                      <div class="schedule-view-summary-item"><dt>予定支出</dt><dd id="schedule-summary-plan-expense">0</dd></div>
                      <div class="schedule-view-summary-item"><dt>予定残高</dt><dd id="schedule-summary-plan-balance">0</dd></div>
                    </dl>
                    <dl class="schedule-view-summary-list schedule-view-summary-row">
                      <div class="schedule-view-summary-item"><dt>実績収入</dt><dd id="schedule-summary-actual-income">0</dd></div>
                      <div class="schedule-view-summary-item"><dt>実績支出</dt><dd id="schedule-summary-actual-expense">0</dd></div>
                      <div class="schedule-view-summary-item"><dt>実績残高</dt><dd id="schedule-summary-actual-balance">0</dd></div>
                    </dl>
                    <dl class="schedule-view-summary-list schedule-view-summary-row">
                      <div class="schedule-view-summary-item"><dt>進捗率(収入)</dt><dd id="schedule-summary-progress-rate-income">—</dd></div>
                      <div class="schedule-view-summary-item"><dt>進捗率(支出)</dt><dd id="schedule-summary-progress-rate-expense">—</dd></div>
                      <div class="schedule-view-summary-item"><dt>進捗率(残高)</dt><dd id="schedule-summary-progress-rate-balance">—</dd></div>
                    </dl>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- ビュー: 勘定項目 -->
            <div id="view-account-list" class="main-view main-view--hidden main-view--list" data-view="account">
              <div class="view-body">
                <table class="data-table data-table--editable" id="account-table" data-list="account">
                  <thead>
                    <tr>
                      <th class="data-table-drag-col" aria-label="並び替え"></th>
                      <th class="data-table-icon-col" aria-label="アイコン"></th>
                      <th>勘定項目名</th>
                      <th class="account-table-balance-col">残高</th>
                      <th class="account-table-permission-col">権限</th>
                      <th class="account-table-delete-col"></th>
                    </tr>
                  </thead>
                  <tbody id="account-tbody"></tbody>
                </table>
              </div>
              <div class="view-body account-shared-view-body">
                <h2 class="account-shared-title">参照可能な勘定</h2>
                <table class="data-table" id="account-shared-table" aria-label="参照可能な他ユーザーの勘定項目">
                  <thead>
                    <tr>
                      <th class="data-table-icon-col" aria-label="アイコン"></th>
                      <th>勘定項目名</th>
                      <th class="account-table-balance-col">残高</th>
                      <th class="account-shared-user-col">ユーザー</th>
                      <th class="account-shared-permission-col">権限</th>
                    </tr>
                  </thead>
                  <tbody id="account-shared-tbody"></tbody>
                </table>
              </div>
            </div>

            <!-- ビュー: カテゴリー -->
            <div id="view-category-list" class="main-view main-view--hidden main-view--list" data-view="category">
              <div class="view-body">
                <div class="category-tabs-row">
                  <div class="category-tabs" role="tablist" aria-label="種別">
                    <button type="button" class="category-tab is-active" role="tab" aria-selected="true" data-type="expense">支出</button>
                    <button type="button" class="category-tab" role="tab" aria-selected="false" data-type="income">収入</button>
                    <button type="button" class="category-tab" role="tab" aria-selected="false" data-type="transfer">振替</button>
                  </div>
                  <button type="button" class="btn-category-tree-view" id="category-tree-view-btn" aria-pressed="true" title="一覧表示に切り替え">フラットビュー</button>
                </div>
                <table class="data-table data-table--editable" id="category-table" data-list="category">
                  <thead>
                    <tr>
                      <th class="data-table-drag-col" aria-label="並び替え"></th>
                      <th class="data-table-icon-col" aria-label="アイコン"></th>
                      <th>カテゴリー名</th>
                      <th class="category-parent-col">親カテゴリー</th>
                      <th class="account-table-delete-col"></th>
                    </tr>
                  </thead>
                  <tbody id="category-tbody"></tbody>
                </table>
              </div>
            </div>

            <!-- ビュー: タグ -->
            <div id="view-tag-list" class="main-view main-view--hidden main-view--list" data-view="tag">
              <div class="view-body">
                <table class="data-table data-table--editable" id="tag-table" data-list="tag">
                  <thead>
                    <tr>
                      <th class="data-table-drag-col" aria-label="並び替え"></th>
                      <th class="data-table-icon-col" aria-label="アイコン"></th>
                      <th>タグ名</th>
                      <th class="account-table-delete-col"></th>
                    </tr>
                  </thead>
                  <tbody id="tag-tbody"></tbody>
                </table>
              </div>
            </div>

            <!-- ビュー: 収支履歴（一覧のみ） -->
            <div id="view-transaction-history" class="main-view main-view--hidden" data-view="transaction-history">
              <div class="view-body">
                <section class="transaction-history-data" aria-label="データ表示">
                  <div id="transaction-history-list-panel" class="transaction-history-panel" role="region" aria-label="収支履歴一覧">
                    <div class="transaction-history-list-header" aria-hidden="true">
                      <span id="transaction-history-pagination-info-top" class="transaction-history-pagination-info-top"></span>
                    </div>
                    <div class="transaction-history-table-wrap" aria-label="収支履歴テーブル">
                      <table class="data-table" id="transaction-history-table" aria-label="収支履歴">
                        <thead>
                          <tr>
                            <th>日付</th>
                            <th class="data-table-icon-col" aria-label="カテゴリー">カテゴリー</th>
                            <th class="data-table-icon-col" aria-label="計画"></th>
                            <th>金額</th>
                            <th>項目名</th>
                            <th>タグ</th>
                            <th class="data-table-icon-col" aria-label="勘定項目">勘定項目</th>
                            <th>予定終了日</th>
                          </tr>
                        </thead>
                        <tbody id="transaction-history-tbody"></tbody>
                      </table>
                    </div>
                    <div id="transaction-history-pagination" class="transaction-history-pagination" aria-label="ページネーション"></div>
                  </div>
                </section>
              </div>
            </div>

            <!-- ビュー: カレンダー（週・月タブ + グラフ） -->
            <div id="view-transaction-calendar" class="main-view main-view--hidden" data-view="transaction-history-calendar">
              <div class="view-body">
                <section class="transaction-history-data" aria-label="カレンダー表示">
                  <div class="transaction-history-tabs-row">
                    <div class="transaction-history-tabs-row-left">
                      <div class="transaction-history-tabs" role="tablist" aria-label="表示切替">
                        <button type="button" class="transaction-history-tab is-active" role="tab" aria-selected="true" data-tab="calendar" id="transaction-history-tab-calendar">月カレンダー</button>
                        <button type="button" class="transaction-history-tab" role="tab" aria-selected="false" data-tab="weekly" id="transaction-history-tab-weekly">週カレンダー</button>
                      </div>
                    </div>
                    <div class="transaction-history-tabs-row-center" aria-hidden="true">
                      <div class="transaction-history-calendar-header" aria-label="年月切替">
                        <button type="button" class="btn-secondary transaction-history-calendar-prev" id="transaction-history-calendar-prev" aria-label="前月">◀</button>
                        <input type="month" id="transaction-history-calendar-ym" class="transaction-history-calendar-ym" aria-label="年月を選択" title="年月ピッカー" />
                        <button type="button" class="btn-secondary transaction-history-calendar-next" id="transaction-history-calendar-next" aria-label="次月">▶</button>
                      </div>
                    </div>
                    <div class="transaction-history-tabs-row-right" aria-hidden="true"></div>
                  </div>
                  <div id="transaction-history-weekly-panel" class="transaction-history-panel transaction-history-panel--hidden" role="tabpanel" aria-labelledby="transaction-history-tab-weekly">
                    <div id="transaction-history-weekly-blocks" class="transaction-history-weekly-blocks" aria-label="週ごと一覧"></div>
                    <div id="transaction-history-week-footers" class="transaction-history-week-footers" aria-label="週ごと合計"></div>
                  </div>
                  <div id="transaction-history-calendar-panel" class="transaction-history-panel" role="tabpanel" aria-labelledby="transaction-history-tab-calendar">
                    <div id="transaction-history-calendar-grid" class="transaction-history-calendar-grid" aria-label="カレンダー"></div>
                  </div>
                </section>
              </div>
              <div id="transaction-history-charts-body" class="view-body transaction-history-charts-body transaction-history-panel--hidden" aria-label="グラフ">
                <section class="transaction-history-charts-section">
                    <h2 class="transaction-history-charts-title">収支グラフ</h2>
                    <div class="transaction-history-charts-grid">
                      <figure class="transaction-history-chart-figure transaction-history-chart-figure--balance">
                        <div class="transaction-history-chart-balance-head">
                          <figcaption class="transaction-history-chart-caption">残高推移</figcaption>
                          <div class="transaction-history-chart-balance-header">
                            <label for="transaction-history-chart-balance-account" class="transaction-history-chart-balance-label">勘定</label>
                            <select id="transaction-history-chart-balance-account" class="transaction-history-chart-balance-select" aria-label="勘定項目を選択"></select>
                          </div>
                        </div>
                        <div class="transaction-history-chart-wrap transaction-history-chart-wrap--diff"><canvas id="transaction-history-chart-balance" aria-label="残高推移の折れ線グラフ"></canvas></div>
                      </figure>
                      <figure class="transaction-history-chart-figure transaction-history-chart-figure--diff">
                        <figcaption class="transaction-history-chart-caption">予定収入と実績収入の差分</figcaption>
                        <div class="transaction-history-chart-wrap transaction-history-chart-wrap--diff"><canvas id="transaction-history-chart-income-diff" aria-label="予定収入と実績収入の差分チャート"></canvas></div>
                      </figure>
                      <figure class="transaction-history-chart-figure transaction-history-chart-figure--diff">
                        <figcaption class="transaction-history-chart-caption">予定支出と実績支出の差分</figcaption>
                        <div class="transaction-history-chart-wrap transaction-history-chart-wrap--diff"><canvas id="transaction-history-chart-expense-diff" aria-label="予定支出と実績支出の差分チャート"></canvas></div>
                      </figure>
                      <div class="transaction-history-charts-row">
                        <figure class="transaction-history-chart-figure">
                          <figcaption class="transaction-history-chart-caption">予定収入のカテゴリー割合</figcaption>
                          <div class="transaction-history-chart-wrap"><canvas id="transaction-history-chart-plan-income-pie" aria-label="予定収入のカテゴリー割合円グラフ"></canvas></div>
                        </figure>
                        <figure class="transaction-history-chart-figure">
                          <figcaption class="transaction-history-chart-caption">実績収入のカテゴリー割合</figcaption>
                          <div class="transaction-history-chart-wrap"><canvas id="transaction-history-chart-actual-income-pie" aria-label="実績収入のカテゴリー割合円グラフ"></canvas></div>
                        </figure>
                      </div>
                      <div class="transaction-history-charts-row">
                        <figure class="transaction-history-chart-figure">
                          <figcaption class="transaction-history-chart-caption">予定支出のカテゴリー割合</figcaption>
                          <div class="transaction-history-chart-wrap"><canvas id="transaction-history-chart-plan-expense-pie" aria-label="予定支出のカテゴリー割合円グラフ"></canvas></div>
                        </figure>
                        <figure class="transaction-history-chart-figure">
                          <figcaption class="transaction-history-chart-caption">実績支出のカテゴリー割合</figcaption>
                          <div class="transaction-history-chart-wrap"><canvas id="transaction-history-chart-actual-expense-pie" aria-label="実績支出のカテゴリー割合円グラフ"></canvas></div>
                        </figure>
                      </div>
                    </div>
                </section>
              </div>
            </div>

            <!-- ビュー: 収支分析 -->
            <div id="view-transaction-analysis" class="main-view main-view--hidden" data-view="transaction-analysis">
              <div class="view-body"></div>
            </div>

            <!-- ビュー: 収支記録（メイン） -->
            <div id="view-transaction-entry" class="main-view main-view--hidden" data-view="transaction-entry">
              <div class="view-body transaction-entry-view-body">
                <div class="transaction-entry-main view-body--form">
                <form id="transaction-entry-form" class="data-form">
                  <input type="hidden" id="transaction-entry-type" name="type" value="expense" />
                  <input type="hidden" id="transaction-entry-status" name="status" value="actual" />
                  <input type="hidden" id="transaction-entry-completed-plandate" value="" />
                  <div class="form-row transaction-entry-buttons-row">
                    <label class="transaction-entry-buttons-label">収支種別</label>
                    <div id="transaction-entry-type-buttons" class="transaction-entry-buttons" role="group" aria-label="収支種別">
                      <button type="button" class="btn-secondary transaction-history-filter-btn is-active" data-type="expense" id="transaction-entry-type-expense">支出</button>
                      <button type="button" class="btn-secondary transaction-history-filter-btn" data-type="income" id="transaction-entry-type-income">収入</button>
                      <button type="button" class="btn-secondary transaction-history-filter-btn" data-type="transfer" id="transaction-entry-type-transfer">振替</button>
                    </div>
                  </div>
                  <div class="form-row transaction-entry-buttons-row">
                    <label class="transaction-entry-buttons-label">計画</label>
                    <div id="transaction-entry-status-buttons" class="transaction-entry-buttons" role="group" aria-label="計画">
                      <button type="button" class="btn-secondary transaction-history-filter-btn" data-status="plan" id="transaction-entry-status-plan">予定</button>
                      <button type="button" class="btn-secondary transaction-history-filter-btn is-active" data-status="actual" id="transaction-entry-status-actual">実績</button>
                    </div>
                  </div>
                  <div class="form-row transaction-entry-category-row">
                    <label for="transaction-entry-category-trigger" class="transaction-entry-category-label">カテゴリー</label>
                    <div class="transaction-entry-category-dropdown">
                      <input type="hidden" id="transaction-entry-category" name="category" value="" required />
                      <button type="button" id="transaction-entry-category-trigger" class="transaction-entry-category-trigger" aria-haspopup="listbox" aria-expanded="false" aria-label="カテゴリーを選択">
                        <span class="transaction-entry-category-trigger-icon" aria-hidden="true"></span>
                        <span class="transaction-entry-category-trigger-text">—</span>
                      </button>
                      <div id="transaction-entry-category-list" class="transaction-entry-category-list" role="listbox" aria-hidden="true"></div>
                    </div>
                  </div>
                  <div class="form-row transaction-entry-inline-row transaction-entry-name-row">
                    <label for="transaction-entry-name" class="transaction-entry-inline-label">取引名</label>
                    <input id="transaction-entry-name" type="text" required maxlength="200" placeholder="取引名を入力" aria-label="取引名" class="transaction-entry-inline-input" />
                  </div>
                  <div class="form-row transaction-entry-inline-row" id="transaction-entry-date-row">
                    <label class="transaction-entry-inline-label">取引日</label>
                    <div id="transaction-entry-date-actual-wrap" class="transaction-entry-date-wrap">
                      <input id="transaction-entry-date" type="date" required aria-label="取引日" class="transaction-entry-inline-input" />
                    </div>
                    <div id="transaction-entry-date-plan-wrap" class="transaction-entry-date-wrap transaction-entry-date-plan-wrap" hidden>
                      <input id="transaction-entry-date-from" type="date" aria-label="取引日FROM" class="transaction-entry-inline-input" />
                      <span class="transaction-entry-date-sep">～</span>
                      <input id="transaction-entry-date-to" type="date" aria-label="取引日TO" class="transaction-entry-inline-input" />
                    </div>
                  </div>
                  <div class="form-row transaction-entry-inline-row transaction-entry-amount-row">
                    <label for="transaction-entry-amount" class="transaction-entry-inline-label">金額</label>
                    <input id="transaction-entry-amount" type="number" required min="0" step="1" placeholder="0" aria-label="金額" class="transaction-entry-amount-input" />
                  </div>
                  <div class="form-row transaction-entry-inline-row transaction-entry-memo-row">
                    <label for="transaction-entry-memo" class="transaction-entry-inline-label">メモ</label>
                    <textarea id="transaction-entry-memo" maxlength="500" placeholder="メモ（任意）" aria-label="メモ" class="transaction-entry-memo-textarea" rows="3"></textarea>
                  </div>
                  <div class="form-row transaction-entry-account-row transaction-entry-account-row--out" id="transaction-entry-account-out-row">
                    <label for="transaction-entry-account-out-trigger" class="transaction-entry-buttons-label">出金元</label>
                    <div id="transaction-entry-account-out-dropdown" class="transaction-entry-account-dropdown">
                      <input type="hidden" id="transaction-entry-account-out" name="account-out" value="" />
                      <button type="button" id="transaction-entry-account-out-trigger" class="transaction-entry-account-trigger" aria-haspopup="listbox" aria-expanded="false" aria-label="出金元を選択">
                        <span class="transaction-entry-account-trigger-icon" aria-hidden="true"></span>
                        <span class="transaction-entry-account-trigger-text">—</span>
                      </button>
                      <div id="transaction-entry-account-out-list" class="transaction-entry-account-list" role="listbox" aria-hidden="true"></div>
                    </div>
                  </div>
                  <div class="form-row transaction-entry-account-row transaction-entry-account-row--in" id="transaction-entry-account-in-row">
                    <label for="transaction-entry-account-in-trigger" class="transaction-entry-buttons-label">入金先</label>
                    <div id="transaction-entry-account-in-dropdown" class="transaction-entry-account-dropdown">
                      <input type="hidden" id="transaction-entry-account-in" name="account-in" value="" />
                      <button type="button" id="transaction-entry-account-in-trigger" class="transaction-entry-account-trigger" aria-haspopup="listbox" aria-expanded="false" aria-label="入金先を選択">
                        <span class="transaction-entry-account-trigger-icon" aria-hidden="true"></span>
                        <span class="transaction-entry-account-trigger-text">—</span>
                      </button>
                      <div id="transaction-entry-account-in-list" class="transaction-entry-account-list" role="listbox" aria-hidden="true"></div>
                    </div>
                  </div>
                  <div class="form-row transaction-entry-tag-row">
                    <label class="transaction-entry-buttons-label">タグ</label>
                    <div id="transaction-entry-tag-chosen" class="transaction-entry-tag-chosen" aria-live="polite"></div>
                    <div class="transaction-entry-tag-area">
                      <button type="button" class="btn-secondary transaction-entry-tag-open-btn" id="transaction-entry-tag-open-btn">タグを選択</button>
                    </div>
                  </div>
                  <div class="form-row transaction-entry-buttons-row transaction-entry-plan-only" id="transaction-entry-plan-status-row" hidden>
                    <label class="transaction-entry-buttons-label">ステータス</label>
                    <div id="transaction-entry-plan-status-buttons" class="transaction-entry-buttons" role="group" aria-label="予定状況">
                      <button type="button" class="btn-secondary transaction-history-filter-btn is-active" data-plan-status="planning" id="transaction-entry-plan-status-planning">計画中</button>
                      <button type="button" class="btn-secondary transaction-history-filter-btn" data-plan-status="complete" id="transaction-entry-plan-status-complete">完了</button>
                      <button type="button" class="btn-secondary transaction-history-filter-btn" data-plan-status="canceled" id="transaction-entry-plan-status-canceled">中止</button>
                    </div>
                  </div>
                  <div id="transaction-entry-actual-select-overlay" class="modal-overlay" aria-hidden="true">
                    <div class="modal-content transaction-history-select-modal" role="dialog" aria-labelledby="transaction-entry-actual-select-title" aria-modal="true" style="--icon-check: url(/icon/circle-check-solid-full.svg);">
                      <h2 id="transaction-entry-actual-select-title" class="transaction-history-select-title">取引実績を選択</h2>
                      <div id="transaction-entry-actual-select-ym-picker" class="transaction-entry-actual-select-ym-picker" aria-label="年月選択">
                        <button type="button" class="transaction-entry-actual-select-ym-prev" aria-label="前月">◀</button>
                        <input type="month" id="transaction-entry-actual-select-ym-label" class="transaction-entry-actual-select-ym-label" aria-label="年月を選択" title="年月ピッカー">
                        <button type="button" class="transaction-entry-actual-select-ym-next" aria-label="次月">▶</button>
                      </div>
                      <div id="transaction-entry-actual-select-list" class="transaction-history-select-list transaction-entry-actual-select-list-wrap">
                        <div class="transaction-entry-actual-select-header" role="presentation" aria-hidden="true">
                          <span class="transaction-entry-actual-select-header-check"></span>
                          <span class="transaction-entry-actual-select-header-icon"></span>
                          <span class="transaction-entry-actual-select-header-name">取引名</span>
                          <span class="transaction-entry-actual-select-header-date">取引日</span>
                          <span class="transaction-entry-actual-select-header-amount">金額</span>
                        </div>
                        <div id="transaction-entry-actual-select-list-body" class="transaction-entry-actual-select-list-body"></div>
                      </div>
                      <div class="transaction-history-select-actions">
                        <button type="button" class="btn-secondary" id="transaction-entry-actual-select-clear">全解除</button>
                        <button type="button" class="btn-primary" id="transaction-entry-actual-select-apply">設定</button>
                      </div>
                    </div>
                  </div>
                  <div id="transaction-entry-tag-select-overlay" class="modal-overlay" aria-hidden="true">
                    <div class="modal-content transaction-history-select-modal" role="dialog" aria-labelledby="transaction-entry-tag-select-title" aria-modal="true" style="--icon-check: url(/icon/circle-check-solid-full.svg);">
                      <h2 id="transaction-entry-tag-select-title" class="transaction-history-select-title">タグを選択</h2>
                      <div id="transaction-entry-tag-select-list" class="transaction-history-select-list transaction-entry-tag-select-list-wrap">
                        <div class="transaction-entry-tag-select-header" role="presentation" aria-hidden="true">
                          <span class="transaction-entry-tag-select-header-check"></span>
                          <span class="transaction-entry-tag-select-header-icon"></span>
                          <span class="transaction-entry-tag-select-header-name">タグ名</span>
                        </div>
                        <div id="transaction-entry-tag-select-list-body" class="transaction-entry-tag-select-list-body"></div>
                      </div>
                      <div class="transaction-history-select-actions">
                        <button type="button" class="btn-secondary" id="transaction-entry-tag-select-clear">全解除</button>
                        <button type="button" class="btn-primary" id="transaction-entry-tag-select-apply">設定</button>
                      </div>
                    </div>
                  </div>
                  <div id="transaction-entry-cycle-monthly-select-overlay" class="modal-overlay" aria-hidden="true">
                    <div class="modal-content transaction-entry-cycle-monthly-select-modal" role="dialog" aria-labelledby="transaction-entry-cycle-monthly-select-title" aria-modal="true">
                      <h2 id="transaction-entry-cycle-monthly-select-title" class="transaction-history-select-title">対象日を選択</h2>
                      <div id="transaction-entry-cycle-monthly-select-grid" class="transaction-entry-cycle-monthly-select-grid"></div>
                      <div class="transaction-history-select-actions">
                        <button type="button" class="btn-secondary" id="transaction-entry-cycle-monthly-select-cancel">キャンセル</button>
                        <button type="button" class="btn-primary" id="transaction-entry-cycle-monthly-select-apply">設定</button>
                      </div>
                    </div>
                  </div>
                  <div id="transaction-entry-completed-dates-overlay" class="modal-overlay" aria-hidden="true">
                    <div class="modal-content schedule-occurrence-modal" role="dialog" aria-labelledby="transaction-entry-completed-dates-title" aria-modal="true" style="--icon-check: url(/icon/circle-check-solid-full.svg);">
                      <h2 id="transaction-entry-completed-dates-title" class="schedule-occurrence-title">完了日を選択</h2>
                      <div id="transaction-entry-completed-dates-wrap" class="schedule-occurrence-dates-wrap"></div>
                      <div class="schedule-occurrence-actions">
                        <button type="button" class="btn-primary" id="transaction-entry-completed-dates-apply">設定</button>
                      </div>
                    </div>
                  </div>
                </form>
                </div>
              </div>
              <!-- ビュー: 収支記録（予定取引オプション） -->
              <div class="view-body transaction-entry-plan-options-view-body transaction-entry-plan-options-view transaction-entry-plan-only" id="transaction-entry-plan-options-view" aria-label="予定取引オプション" hidden>
                <h2 class="transaction-entry-plan-options-title">予定取引オプション</h2>
                <div class="transaction-entry-plan-options-inner">
                  <div class="form-row transaction-entry-frequency-row" id="transaction-entry-frequency-row">
                    <div id="transaction-entry-frequency-buttons" class="transaction-entry-frequency-block" role="group" aria-label="頻度">
                      <div class="transaction-entry-frequency-upper transaction-entry-frequency-line">
                        <label class="transaction-entry-buttons-label">頻度</label>
                        <div class="transaction-entry-buttons">
                          <button type="button" class="btn-secondary transaction-history-filter-btn is-active" data-frequency="day" id="transaction-entry-frequency-day">1日</button>
                          <button type="button" class="btn-secondary transaction-history-filter-btn" data-frequency="daily" id="transaction-entry-frequency-daily">日ごと</button>
                          <button type="button" class="btn-secondary transaction-history-filter-btn" data-frequency="weekly" id="transaction-entry-frequency-weekly">週ごと</button>
                        </div>
                      </div>
                      <div class="transaction-entry-frequency-lower transaction-entry-frequency-line">
                        <span class="transaction-entry-frequency-label-spacer transaction-entry-buttons-label" aria-hidden="true"></span>
                        <div class="transaction-entry-buttons">
                          <button type="button" class="btn-secondary transaction-history-filter-btn" data-frequency="monthly" id="transaction-entry-frequency-monthly">月ごと</button>
                          <button type="button" class="btn-secondary transaction-history-filter-btn" data-frequency="yearly" id="transaction-entry-frequency-yearly">年ごと</button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-row transaction-entry-inline-row" id="transaction-entry-interval-row" hidden>
                    <label for="transaction-entry-interval" class="transaction-entry-inline-label">間隔</label>
                    <div class="transaction-entry-interval-wrap">
                      <input id="transaction-entry-interval" type="number" min="0" max="999" step="1" value="1" aria-label="間隔" class="transaction-entry-inline-input transaction-entry-interval-input" />
                      <span id="transaction-entry-interval-frequency-label" class="transaction-entry-interval-frequency-label" aria-hidden="true"></span>
                    </div>
                  </div>
                  <div class="form-row transaction-entry-cycle-row" id="transaction-entry-cycle-row" hidden>
                    <div class="transaction-entry-cycle-label-block">
                      <label class="transaction-entry-buttons-label">繰り返し</label>
                    </div>
                    <div class="transaction-entry-cycle-input-block">
                      <div id="transaction-entry-cycle-content" class="transaction-entry-cycle-content"></div>
                    </div>
                  </div>
                  <div class="form-row transaction-entry-plan-dates-row transaction-entry-actual-row" id="transaction-entry-plan-dates-row">
                    <div class="transaction-entry-actual-label-block">
                      <label for="transaction-entry-completed-dates-open-btn" class="transaction-entry-buttons-label">予定完了日</label>
                    </div>
                    <div class="transaction-entry-actual-right">
                      <div class="transaction-entry-actual-area">
                        <button type="button" class="btn-secondary transaction-entry-actual-open-btn" id="transaction-entry-completed-dates-open-btn">完了日を選択</button>
                      </div>
                      <div id="transaction-entry-completed-dates-chosen" class="transaction-entry-tag-chosen transaction-entry-completed-dates-chips" aria-live="polite"></div>
                    </div>
                  </div>
                  <div class="form-row transaction-entry-actual-row" id="transaction-entry-actual-row">
                    <div class="transaction-entry-actual-label-block">
                      <label for="transaction-entry-actual-open-btn" class="transaction-entry-buttons-label">実績</label>
                    </div>
                    <div class="transaction-entry-actual-right">
                      <div class="transaction-entry-actual-area">
                        <button type="button" class="btn-secondary transaction-entry-actual-open-btn" id="transaction-entry-actual-open-btn">取引実績を選択</button>
                      </div>
                      <div id="transaction-entry-actual-chosen" class="transaction-entry-tag-chosen" aria-live="polite"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- ビュー: プロフィール -->
            <div id="view-profile" class="main-view main-view--hidden" data-view="profile">
              <div class="view-body view-body--form">
                <form id="profile-form" class="settings-form profile-form">
                  <div class="profile-icon-row">
                    <div id="profile-form-icon-display" class="profile-icon-display" aria-hidden="true"></div>
                    <input type="hidden" id="profile-form-icon-path" value="" />
                    <input type="color" id="profile-form-icon-bg-color" class="profile-icon-bg-color" value="#646cff" aria-hidden="true" style="position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0;" />
                    <input type="text" id="profile-form-icon-bg-hex" class="profile-icon-bg-hex" value="#646cff" maxlength="7" aria-label="アイコン背景色（カラーコード）" style="position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0;" />
                    <div class="profile-icon-actions">
                      <button type="button" class="btn-secondary" id="profile-form-icon-bg-picker-btn">背景色を選択</button>
                      <input type="file" id="profile-form-icon-file" accept="image/*" class="profile-icon-file-input" aria-label="画像を選択" />
                      <button type="button" class="btn-secondary" id="profile-form-icon-upload-btn">画像を選択</button>
                      <button type="button" class="btn-secondary" id="profile-form-icon-default-btn">デフォルトに戻す</button>
                    </div>
                  </div>
                  <div class="form-row">
                    <label for="profile-form-name">表示名</label>
                    <input id="profile-form-name" type="text" required maxlength="100" placeholder="表示名を入力" />
                  </div>
                </form>
              </div>
            </div>

            <!-- ビュー: システム（仮画面） -->
            <div id="view-system" class="main-view main-view--hidden" data-view="system">
              <div class="view-body view-body--form">
                <div class="system-view-actions-block">
                  <div class="system-view-action-item">
                    <p class="system-view-action-desc">現在論理削除済みの取引データを物理削除し、データ整理を行います。</p>
                    <button type="button" class="btn-secondary" id="system-physical-delete-btn">物理削除</button>
                  </div>
                  <div class="system-view-action-item">
                    <p class="system-view-action-desc">個人の勘定項目を実績取引データから再計算します。</p>
                    <button type="button" class="btn-secondary" id="system-account-aggregate-btn">勘定集計</button>
                  </div>
                  <div class="system-view-action-item">
                    <p class="system-view-action-desc">ログインユーザーが参照する勘定項目の取引データから月別に収入、支出、残高の再計算をします。</p>
                    <button type="button" class="btn-primary" id="system-monthly-aggregate-btn">月別集計</button>
                  </div>
                </div>
              </div>
            </div>

            <!-- ビュー: デザイン（カラーパレット） -->
            <div id="view-design" class="main-view main-view--hidden" data-view="design">
              <div class="design-view-layout">
                <div class="view-body view-body--form">
                  <form id="design-form" class="settings-form">
                    <div id="design-form-fields" class="design-palette-fields"></div>
                  </form>
                </div>
                <div id="design-preview-wrap" class="design-preview-wrap" aria-label="配色プレビュー">
                  <div class="design-preview">
                    <div class="design-preview__inner">
                      <div class="design-preview__menubar">プレビュー</div>
                      <div class="design-preview__body">
                        <div class="design-preview__content">
                          <div class="design-preview__header">ヘッダー</div>
                          <div class="design-preview__main">
                            <div class="design-preview__main-label">メイン</div>
                            <div class="design-preview__view">ビュー</div>
                          </div>
                          <div class="design-preview__footer">
                            <span class="design-preview__btn">ボタン</span>
                          </div>
                        </div>
                        <div class="design-preview__sidebar">
                          <div class="design-preview__menu-head">メニュー</div>
                          <div class="design-preview__menu-item design-preview__menu-item--current">ホーム</div>
                          <div class="design-preview__menu-item">一覧</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </main>

          <!-- マスタ追加・編集モーダル（勘定 / カテゴリー / タグ） -->
          <div id="account-modal-overlay" class="modal-overlay" aria-hidden="true" data-modal="account">
            <div class="modal-content">
              <form id="account-form" class="data-form" data-form="account">
                <div class="form-row profile-icon-color-row">
                  <label>アイコン</label>
                  <div class="profile-icon-color-inputs">
                    <input type="color" id="account-form-color" class="profile-icon-bg-color" value="#646cff" aria-hidden="true" style="position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0;" />
                    <input type="hidden" id="account-form-icon-path" value="" />
                    <div id="account-form-color-icon-preview" class="category-icon-wrap form-color-icon-preview" aria-hidden="true"></div>
                    <button type="button" class="btn-secondary" id="account-form-color-icon-btn">選択</button>
                  </div>
                </div>
                <div class="form-row">
                  <label for="account-form-name">勘定項目名</label>
                  <input id="account-form-name" type="text" required maxlength="100" placeholder="勘定項目名を入力" />
                </div>
                <div class="form-row account-form-permissions-row">
                  <label for="account-form-permission-list">権限ユーザー</label>
                  <div id="account-form-permission-list" class="account-form-permission-list"></div>
                </div>
                <div class="form-actions">
                  <button type="submit" class="btn-primary">追加</button>
                  <button type="button" class="btn-secondary" id="account-form-permission-add">権限追加</button>
                  <button type="button" class="btn-secondary" id="account-form-cancel">キャンセル</button>
                </div>
              </form>
            </div>
          </div>

          <!-- 勘定項目：権限ユーザー管理 -->
          <div id="account-permission-users-overlay" class="modal-overlay" aria-hidden="true">
            <div class="modal-content account-permission-users-modal" role="dialog" aria-labelledby="account-permission-users-title" aria-modal="true">
              <h2 id="account-permission-users-title" class="account-permission-users-title">権限ユーザー</h2>
              <div id="account-permission-users-list" class="account-permission-users-list"></div>
              <div class="account-permission-users-actions">
                <button type="button" class="btn-primary" id="account-permission-users-add">権限追加</button>
                <button type="button" class="btn-secondary" id="account-permission-users-close">閉じる</button>
              </div>
            </div>
          </div>

          <!-- 勘定項目：ユーザー選択（権限追加時） -->
          <div id="account-form-user-picker-overlay" class="modal-overlay" aria-hidden="true">
            <div class="modal-content account-form-user-picker-modal" role="dialog" aria-labelledby="account-form-user-picker-title" aria-modal="true" style="--icon-check: url(/icon/circle-check-solid-full.svg);">
              <h2 id="account-form-user-picker-title" class="account-form-user-picker-title">ユーザーを選択</h2>
              <div id="account-form-user-picker-list" class="account-form-user-picker-list"></div>
              <div class="form-actions">
                <button type="button" class="btn-primary" id="account-form-user-picker-apply">設定</button>
              </div>
            </div>
          </div>

          <div id="category-modal-overlay" class="modal-overlay" aria-hidden="true" data-modal="category">
            <div class="modal-content">
              <form id="category-form" class="data-form" data-form="category">
                <div class="form-row profile-icon-color-row">
                  <label>アイコン</label>
                  <div class="profile-icon-color-inputs">
                    <input type="color" id="category-form-color" class="profile-icon-bg-color" value="#646cff" aria-hidden="true" style="position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0;" />
                    <input type="hidden" id="category-form-icon-path" value="" />
                    <div id="category-form-color-icon-preview" class="category-icon-wrap form-color-icon-preview" aria-hidden="true"></div>
                    <button type="button" class="btn-secondary" id="category-form-color-icon-btn">選択</button>
                  </div>
                </div>
                <div class="form-row">
                  <label for="category-form-type">種別</label>
                  <select id="category-form-type">
                    <option value="expense">支出</option>
                    <option value="income">収入</option>
                    <option value="transfer">振替</option>
                  </select>
                </div>
                <div class="form-row">
                  <label for="category-form-name">カテゴリー名</label>
                  <input id="category-form-name" type="text" required maxlength="100" placeholder="カテゴリー名を入力" />
                </div>
                <div class="form-row">
                  <label for="category-form-parent">親カテゴリー</label>
                  <select id="category-form-parent" class="category-parent-select" aria-label="親カテゴリー">
                    <option value="">未選択</option>
                  </select>
                </div>
                <div class="form-actions">
                  <button type="submit" class="btn-primary">追加</button>
                  <button type="button" class="btn-secondary" id="category-form-cancel">キャンセル</button>
                </div>
              </form>
            </div>
          </div>

          <div id="tag-modal-overlay" class="modal-overlay" aria-hidden="true" data-modal="tag">
            <div class="modal-content">
              <form id="tag-form" class="data-form" data-form="tag">
                <div class="form-row profile-icon-color-row">
                  <label>アイコン</label>
                  <div class="profile-icon-color-inputs">
                    <input type="color" id="tag-form-color" class="profile-icon-bg-color" value="#646cff" aria-hidden="true" style="position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0;" />
                    <input type="hidden" id="tag-form-icon-path" value="" />
                    <div id="tag-form-color-icon-preview" class="category-icon-wrap form-color-icon-preview" aria-hidden="true"></div>
                    <button type="button" class="btn-secondary" id="tag-form-color-icon-btn">選択</button>
                  </div>
                </div>
                <div class="form-row">
                  <label for="tag-form-name">タグ名</label>
                  <input id="tag-form-name" type="text" required maxlength="100" placeholder="タグ名を入力" />
                </div>
                <div class="form-actions">
                  <button type="submit" class="btn-primary">追加</button>
                  <button type="button" class="btn-secondary" id="tag-form-cancel">キャンセル</button>
                </div>
              </form>
            </div>
          </div>

          <!-- 収支履歴検索：選択モーダル（カテゴリー / タグ / 勘定項目） -->
          <div id="transaction-history-category-select-overlay" class="modal-overlay" aria-hidden="true">
            <div class="modal-content transaction-history-select-modal" role="dialog" aria-labelledby="transaction-history-category-select-title" aria-modal="true" style="--icon-check: url(/icon/circle-check-solid-full.svg);">
              <h2 id="transaction-history-category-select-title" class="transaction-history-select-title">カテゴリーを選択</h2>
              <div class="transaction-history-category-select-tabs-row">
                <div class="transaction-history-category-select-tabs" role="tablist" aria-label="収支種別">
                  <button type="button" class="category-tab transaction-history-category-select-tab is-active" role="tab" aria-selected="true" data-type="expense">支出</button>
                  <button type="button" class="category-tab transaction-history-category-select-tab" role="tab" aria-selected="false" data-type="income">収入</button>
                  <button type="button" class="category-tab transaction-history-category-select-tab" role="tab" aria-selected="false" data-type="transfer">振替</button>
                </div>
              </div>
              <div id="transaction-history-category-select-list" class="transaction-history-select-list"></div>
              <div class="transaction-history-select-actions">
                <button type="button" class="btn-secondary" id="transaction-history-category-select-clear">全解除</button>
                <button type="button" class="btn-primary" id="transaction-history-category-select-apply">設定</button>
              </div>
            </div>
          </div>


          <div id="transaction-history-tag-select-overlay" class="modal-overlay" aria-hidden="true">
            <div class="modal-content transaction-history-select-modal" role="dialog" aria-labelledby="transaction-history-tag-select-title" aria-modal="true" style="--icon-check: url(/icon/circle-check-solid-full.svg);">
              <h2 id="transaction-history-tag-select-title" class="transaction-history-select-title">タグを選択</h2>
              <div id="transaction-history-tag-select-list" class="transaction-history-select-list"></div>
              <div class="transaction-history-select-actions">
                <button type="button" class="btn-secondary" id="transaction-history-tag-select-clear">全解除</button>
                <button type="button" class="btn-primary" id="transaction-history-tag-select-apply">設定</button>
              </div>
            </div>
          </div>


          <div id="transaction-history-account-select-overlay" class="modal-overlay" aria-hidden="true">
            <div class="modal-content transaction-history-select-modal" role="dialog" aria-labelledby="transaction-history-account-select-title" aria-modal="true" style="--icon-check: url(/icon/circle-check-solid-full.svg);">
              <h2 id="transaction-history-account-select-title" class="transaction-history-select-title">勘定項目を選択</h2>
              <div class="transaction-history-account-select-tabs-row">
                <div class="transaction-history-account-select-tabs" role="tablist" aria-label="勘定種別">
                  <button type="button" class="category-tab transaction-history-account-select-tab is-active" role="tab" aria-selected="true" data-tab="own">個人</button>
                  <button type="button" class="category-tab transaction-history-account-select-tab" role="tab" aria-selected="false" data-tab="shared">共有</button>
                </div>
              </div>
              <div id="transaction-history-account-select-list" class="transaction-history-select-list"></div>
              <div class="transaction-history-select-actions">
                <button type="button" class="btn-secondary" id="transaction-history-account-select-own-only">個人のみ</button>
                <button type="button" class="btn-secondary" id="transaction-history-account-select-clear">全解除</button>
                <button type="button" class="btn-primary" id="transaction-history-account-select-apply">設定</button>
              </div>
            </div>
          </div>

          <!-- スケジュール：取引実績確認ポップアップ -->
          <div id="schedule-actual-list-overlay" class="modal-overlay" aria-hidden="true">
            <div class="modal-content schedule-actual-list-modal" role="dialog" aria-labelledby="schedule-actual-list-title" aria-modal="true">
              <h2 id="schedule-actual-list-title" class="schedule-actual-list-title">取引実績</h2>
              <div id="schedule-actual-list-body" class="schedule-actual-list-body"></div>
              <div class="schedule-actual-list-actions">
                <button type="button" class="btn-primary" id="schedule-actual-list-close">閉じる</button>
              </div>
            </div>
          </div>

          <!-- スケジュール：対象日一覧ポップアップ -->
          <div id="schedule-occurrence-overlay" class="modal-overlay" aria-hidden="true">
            <div class="modal-content schedule-occurrence-modal" role="dialog" aria-labelledby="schedule-occurrence-title" aria-modal="true" style="--icon-check: url(/icon/circle-check-solid-full.svg);">
              <h2 id="schedule-occurrence-title" class="schedule-occurrence-title">取引予定日</h2>
              <div class="schedule-occurrence-info">
                <div class="schedule-occurrence-info-block schedule-occurrence-info-block-1">
                  <dl class="schedule-occurrence-info-list">
                    <div class="schedule-occurrence-info-item"><dt>頻度</dt><dd id="schedule-occurrence-frequency">—</dd></div>
                    <div class="schedule-occurrence-info-item"><dt>間隔</dt><dd id="schedule-occurrence-interval">—</dd></div>
                  </dl>
                </div>
                <div class="schedule-occurrence-info-block schedule-occurrence-info-block-2">
                  <div class="schedule-occurrence-cycle-label">繰り返し</div>
                  <div id="schedule-occurrence-cycle" class="schedule-occurrence-cycle-content">—</div>
                </div>
              </div>
              <div id="schedule-occurrence-dates-wrap" class="schedule-occurrence-dates-wrap"></div>
              <div class="schedule-occurrence-actions">
                <button type="button" class="btn-primary" id="schedule-occurrence-apply">設定</button>
              </div>
            </div>
          </div>

          <!-- フッターナビ -->
          <footer class="app-footer">
            <div class="app-footer-spacer"></div>
            <button type="button" class="btn-footer-nav" id="footer-home-btn">ホーム</button>
            <button type="button" class="btn-footer-nav" id="footer-calendar-btn">カレンダー</button>
            <button type="button" class="btn-footer-nav" id="footer-schedule-btn">スケジュール</button>
            <button type="button" class="btn-footer-nav" id="footer-history-btn">収支履歴</button>
            <button type="button" class="btn-footer-nav" id="footer-analysis-btn">収支分析</button>
            <button type="button" class="btn-footer-nav" id="footer-entry-btn">収支記録</button>
            <button type="button" class="btn-footer-nav" id="footer-menu-btn">メニュー</button>
            <button type="button" class="btn-footer-nav" id="footer-settings-btn">設定</button>
            <button type="button" class="btn-footer-back" id="footer-back-btn">戻る</button>
          </footer>
        </div>

        <!-- サイドバー -->
        <aside class="app-sidebar" id="app-sidebar" aria-label="サイドバー" aria-hidden="true">
          <div class="sidebar-panel sidebar-panel-menu" id="sidebar-panel-menu">
            <div class="sidebar-accordion">
              <details class="sidebar-accordion-item" open>
                <summary class="sidebar-accordion-head">スケジュール</summary>
                <ul class="sidebar-accordion-body">
                  <li><button type="button" class="sidebar-menu-item" data-view="home">ホーム</button></li>
                  <li><button type="button" class="sidebar-menu-item" data-view="schedule">スケジュール</button></li>
                  <li><button type="button" class="sidebar-menu-item" data-view="transaction-history-calendar">カレンダー</button></li>
                </ul>
              </details>
              <details class="sidebar-accordion-item" open>
                <summary class="sidebar-accordion-head">収支管理</summary>
                <ul class="sidebar-accordion-body">
                  <li><button type="button" class="sidebar-menu-item" data-view="transaction-entry">収支記録</button></li>
                  <li><button type="button" class="sidebar-menu-item" data-view="transaction-history">収支履歴</button></li>
                  <li><button type="button" class="sidebar-menu-item" data-view="transaction-analysis">収支分析</button></li>
                </ul>
              </details>
              <details class="sidebar-accordion-item" open>
                <summary class="sidebar-accordion-head">マスタ設定</summary>
                <ul class="sidebar-accordion-body">
                  <li><button type="button" class="sidebar-menu-item" data-view="account">勘定項目</button></li>
                  <li><button type="button" class="sidebar-menu-item" data-view="category">カテゴリー</button></li>
                  <li><button type="button" class="sidebar-menu-item" data-view="tag">タグ</button></li>
                </ul>
              </details>
            </div>
            <div class="sidebar-menu-footer">
              <button type="button" class="sidebar-settings-entry-btn app-menubar-icon" id="sidebar-menu-to-settings" aria-label="設定" title="設定">
                <span class="app-menubar-icon-inner" style="--icon: url(/icon/gear-solid-full.svg);" aria-hidden="true"></span>
              </button>
              <button type="button" class="sidebar-settings-entry-btn app-menubar-icon" id="menubar-logout" aria-label="ログアウト" title="ログアウト">
                <span class="app-menubar-icon-inner" style="--icon: url(/icon/right-from-bracket-solid-full.svg);" aria-hidden="true"></span>
              </button>
            </div>
          </div>
          <div class="sidebar-panel sidebar-panel-settings" id="sidebar-panel-settings">
            <ul class="sidebar-settings-list">
              <li><button type="button" class="sidebar-settings-item" data-view="profile">プロフィール</button></li>
              <li><button type="button" class="sidebar-settings-item" data-view="design">デザイン</button></li>
              <li><button type="button" class="sidebar-settings-item" data-view="system">システム</button></li>
            </ul>
          </div>
        </aside>
      </div>

      <!-- 色・アイコンピッカー（共通モーダル） -->
      <div id="color-icon-picker-overlay" class="modal-overlay" aria-hidden="true">
        <div class="modal-content modal-content--picker" onclick="event.stopPropagation()">
          <h2 class="picker-title">色・アイコンを選択</h2>
          <div class="picker-section">
            <span class="picker-label">色</span>
            <div id="color-icon-picker-swatches" class="picker-swatches"></div>
            <div class="picker-custom-color">
              <input type="color" id="color-icon-picker-custom" class="picker-custom-color-input" value="#646cff" aria-hidden="true" />
              <button type="button" class="picker-custom-btn" id="color-icon-picker-custom-btn">カスタム</button>
            </div>
          </div>
          <div id="color-icon-picker-icon-section" class="picker-section">
            <span class="picker-label">アイコン</span>
            <div id="color-icon-picker-icons" class="picker-icon-grid"></div>
          </div>
          <div class="picker-actions">
            <button type="button" class="btn-primary" id="color-icon-picker-apply">適用</button>
            <button type="button" class="btn-secondary" id="color-icon-picker-default-btn">デフォルトに戻す</button>
            <button type="button" class="btn-secondary" id="color-icon-picker-cancel">キャンセル</button>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
